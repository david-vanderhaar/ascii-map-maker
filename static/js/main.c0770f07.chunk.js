(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,a){e.exports=a(551)},205:function(e,t,a){},221:function(e,t,a){},551:function(e,t,a){"use strict";a.r(t);var i=a(0),l=a.n(i),n=a(28),s=a.n(n),r=(a(205),a(25)),o=a(35),c=a(17),h=a(18),d=a(20),u=a(19),m=a(21),p=a(553),y=a(554),_=a(200),v=(a(221),a(82)),f=a.n(v),b=a(199),g=a.n(b),E=a(7),S=a.n(E),w=a(29),O=a.n(w),N=a(24),k=a.n(N),j=function(e){var t=e.cols,a=e.rows,i=e.tiles;return l.a.createElement("div",{className:"JsonView"},l.a.createElement(k.a,{container:!0,spacing:24},l.a.createElement(k.a,{item:!0,xs:12,sm:4},l.a.createElement(S.a,{color:"primary",variant:"contained","aria-label":"copy",onClick:function(){document.getElementById("json-export-data").select(),document.execCommand("copy")}},"Copy to Clipboard")),l.a.createElement(k.a,{item:!0,xs:12,sm:8},l.a.createElement(O.a,{id:"json-export-data",label:"Json",multiline:!0,fullWidth:!0,rowsMax:"8",value:JSON.stringify({cols:t,rows:a,tiles:i}),margin:"normal",variant:"outlined"}))))},C=a(50),T=a(80),L=a.n(T),x=(i.Component,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(){a.props.onUpdateTile(a.props.x,a.props.y)},a.handleMouseOver=function(){a.props.mouse_down&&a.props.onUpdateTile(a.props.x,a.props.y),a.setState({is_hovering:!0})},a.handleMouseOut=function(){a.setState({is_hovering:!1})},a.state={character:e.character,fill:e.color,hover_fill:"red",is_hovering:!1,viewing_offset:-16,viewing_size_increase:8},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.is_viewing*this.state.viewing_offset,t=this.props.is_viewing*this.state.viewing_size_increase;return l.a.createElement(C.Text,{text:this.props.character,fill:this.state.is_hovering?this.state.hover_fill:this.props.color,x:this.props.x+e,y:this.props.y+e,fontSize:16+t,align:"center",verticalAlign:"middle",width:this.props.tile_size,height:this.props.tile_size,onClick:this.handleClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})}}]),t}(i.Component)),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={mouse_down:!1},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"getTile",value:function(e,t){return this.props.tiles[t*this.props.cols+e]}},{key:"drawTiles",value:function(){var e=this;return new Array(this.props.cols).fill(null).map(function(t,a){return new Array(e.props.rows).fill(null).map(function(t,i){var n=e.getTile(a,i);return l.a.createElement(x,{key:"".concat(a,"-").concat(i),is_viewing:!1,x:a*e.props.tile_size,y:i*e.props.tile_size,character:n.character,color:n.color,tile_size:e.props.tile_size,mouse_down:e.state.mouse_down,onUpdateTile:e.handleUpdateTile.bind(e)})})})}},{key:"floodFillUtil",value:function(e,t,a,i,l,n,s){var r=a[l*e+i];return i<0||i>=e||l<0||l>=t?a:JSON.stringify(r)!==JSON.stringify(n)?a:(a[l*e+i]=JSON.parse(JSON.stringify(s)),this.floodFillUtil(e,t,a,i+1,l,n,s),this.floodFillUtil(e,t,a,i-1,l,n,s),this.floodFillUtil(e,t,a,i,l+1,n,s),this.floodFillUtil(e,t,a,i,l-1,n,s),a)}},{key:"floodFill",value:function(e,t,a,i,l,n){var s=a[l*e+i];return this.floodFillUtil(e,t,a,i,l,s,n)}},{key:"handleUpdateTile",value:function(e,t){var a=e/this.props.tile_size,i=t/this.props.tile_size,l=JSON.parse(JSON.stringify(this.props.tiles));switch(this.props.tool_in_use){case"pencil":l[i*this.props.cols+a]={type:1,character:this.props.selected_tile.character,color:this.props.selected_tile.color,data:JSON.stringify(this.props.selected_tile.data)};break;case"eraser":l[i*this.props.cols+a]=Object(o.a)({},this.props.empty_tile);break;case"filler":JSON.stringify(l[i*this.props.cols+a])!==JSON.stringify(this.props.selected_tile)&&(l=this.floodFill(this.props.cols,this.props.rows,l,a,i,this.props.selected_tile));break;default:l[i*this.props.cols+a]={type:1,character:this.props.selected_tile.character,color:this.props.selected_tile.color}}this.props.onUpdateTiles(l)}},{key:"handleMouseDown",value:function(){this.setState({mouse_down:!0})}},{key:"handleMouseUp",value:function(){this.setState({mouse_down:!1})}},{key:"render",value:function(){return l.a.createElement("div",{className:"TileMap"},l.a.createElement(C.Stage,{width:this.props.cols*this.props.tile_size,height:this.props.rows*this.props.tile_size,onMouseDown:this.handleMouseDown.bind(this),onMouseUp:this.handleMouseUp.bind(this)},l.a.createElement(C.Layer,null,this.drawTiles().map(function(e){return e}))))}}]),t}(i.Component),U=a(198),A=a.n(U),z=a(60),R=a.n(z),F=a(31),M=a(197),I=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(F.a)({},e,t.target.value))}};var i=a.props.editing_tile_id?a.props.tiles.filter(function(e){return e.id===a.props.editing_tile_id})[0]:null,l=i?i.label:"",n=i?i.character:"",s=i?i.color:"#fff",r=i?JSON.stringify(i.data):"";return a.state={tile_label:l,tile_character:n,tile_color:s,tile_data:r},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"handleColorChange",value:function(e,t){this.setState({tile_color:e.hex})}},{key:"onSubmit",value:function(){var e={label:this.state.tile_label,character:this.state.tile_character,color:this.state.tile_color};try{e.data=JSON.parse(this.state.tile_data)}catch(t){e.data=this.state.tile_data}this.props.editing_tile_id?this.props.handleEditTile(e,this.props.editing_tile_id):this.props.handleAddTile(e)}},{key:"render",value:function(){return l.a.createElement("div",{className:"TileForm"},l.a.createElement("div",{className:"form row"},l.a.createElement(O.a,{id:"tile-label",label:"Label",className:"text-field",defaultValue:this.state.tile_label,onChange:this.handleChange("tile_label"),margin:"normal",variant:"outlined"}),l.a.createElement(O.a,{id:"tile-character",label:"Character",className:"text-field",defaultValue:this.state.tile_character,onChange:this.handleChange("tile_character"),margin:"normal",variant:"outlined"}),l.a.createElement("div",{className:"form-label"},"Color"),l.a.createElement(M.SketchPicker,{width:"initial",color:this.state.tile_color,onChangeComplete:this.handleColorChange.bind(this)}),l.a.createElement("br",null),l.a.createElement(O.a,{id:"tile-data",label:"Data",placeholder:"{ type: tree }",multiline:!0,defaultValue:this.state.tile_data,onChange:this.handleChange("tile_data"),className:"text-field",margin:"normal",variant:"outlined"}),l.a.createElement(S.a,{variant:"outlined",color:"primary",className:"btn-full-width",onClick:this.onSubmit.bind(this)},l.a.createElement("i",{className:"material-icons"},"save"))))}}]),t}(i.Component),G=function(e){var t=e.character,a=e.color;return l.a.createElement("div",{className:"TilePreview"},l.a.createElement("span",{style:{color:a}},t))},P=function(e){var t=e.id,a=e.label,i=e.color,n=e.character,s=e.data,r=e.handleSwapSelectedTile,o=e.handleCloseForm,c=e.handleRemoveTile,h=e.handleToggleEdit;return l.a.createElement("div",{className:"TilePlate"},l.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){r({character:n,color:i,data:s}),o()}},a),l.a.createElement("span",{className:"actions"},l.a.createElement(S.a,{color:"secondary","aria-label":"remove tile",onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"delete")),l.a.createElement(S.a,{color:"secondary","aria-label":"edit tile",onClick:function(){h(t)}},l.a.createElement("i",{className:"material-icons"},"edit"))))},D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={tiles:[{id:1,label:"land",color:"#298",character:"L",data:{type:"province",owner:"Oda"}},{id:2,label:"water",color:"#ace",character:"~",data:{type:"natural",owner:"none"}},{id:3,label:"mountain",color:"#bbb",character:"M",data:{type:"natural",owner:"none"}},{id:4,label:"army",color:"#f44",character:"@",data:{type:"troop",owner:"Oda"}}],form_is_visible:!1,editing_tile_id:null},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"drawTilePlates",value:function(){var e=this;return this.state.tiles.map(function(t,a){return l.a.createElement(P,{key:a,id:t.id,label:t.label,color:t.color,character:t.character,data:Object(o.a)({},t.data),handleSwapSelectedTile:e.props.handleSwapSelectedTile,handleCloseForm:e.handleCloseForm.bind(e),handleRemoveTile:e.handleRemoveTile.bind(e),handleToggleEdit:e.handleToggleEdit.bind(e)})})}},{key:"handleToggleForm",value:function(){this.setState({form_is_visible:!this.state.form_is_visible})}},{key:"handleCloseForm",value:function(){this.setState({form_is_visible:!1,editing_tile_id:null})}},{key:"handleToggleEdit",value:function(e){var t=this;this.setState({editing_tile_id:e,form_is_visible:!1},function(){t.setState({form_is_visible:!0})})}},{key:"handleAddTile",value:function(e){var t=Object(r.a)(this.state.tiles),a={id:t.length>0?t[t.length-1].id+1:1};this.setState({tiles:t.concat(Object(o.a)({},a,e)),form_is_visible:!1}),this.props.handleSwapSelectedTile(e)}},{key:"handleEditTile",value:function(e,t){var a=Object(r.a)(this.state.tiles).map(function(a){return a.id===t?(e.id=t,Object(o.a)({},t,e)):a});this.setState({tiles:a,form_is_visible:!1,editing_tile_id:null}),this.props.handleSwapSelectedTile(e)}},{key:"handleRemoveTile",value:function(e){var t=this.state.tiles.filter(function(t){return t.id!==e});this.setState({tiles:t,form_is_visible:!1,editing_tile_id:null})}},{key:"render",value:function(){return l.a.createElement("div",{className:"TilePalette tool-pane"},l.a.createElement(k.a,{container:!0,spacing:24},l.a.createElement(k.a,{item:!0,xs:12,sm:8},l.a.createElement("h5",null,"Palette"),this.drawTilePlates()),l.a.createElement(k.a,{item:!0,xs:12,sm:4},l.a.createElement("h5",null,"Current Tile"),l.a.createElement(G,{character:this.props.selected_tile.character,color:this.props.selected_tile.color}))),l.a.createElement("br",null),l.a.createElement(S.a,{variant:"outlined",color:"default",className:"btn-full-width",onClick:this.handleToggleForm.bind(this)},this.state.form_is_visible?l.a.createElement("i",{className:"material-icons"},"close"):l.a.createElement("i",{className:"material-icons"},"add")),this.state.form_is_visible&&l.a.createElement(I,{tiles:this.state.tiles,editing_tile_id:this.state.editing_tile_id,handleEditTile:this.handleEditTile.bind(this),handleAddTile:this.handleAddTile.bind(this)}))}}]),t}(i.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(F.a)({},e,t.target.value))}},a.state={layer_name:""},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"onSubmit",value:function(){var e={name:this.state.layer_name};this.setState({layer_name:""}),this.props.handleAddLayer(e)}},{key:"render",value:function(){return l.a.createElement("div",{className:"LayerForm"},l.a.createElement("div",{className:"form row"},l.a.createElement(O.a,{id:"layer-name",label:"Name",className:"text-field",value:this.state.layer_name,onChange:this.handleChange("layer_name"),margin:"normal",variant:"outlined"}),l.a.createElement(S.a,{variant:"outlined",color:"primary",className:"btn-full-width",onClick:this.onSubmit.bind(this)},l.a.createElement("i",{className:"material-icons"},"save"))))}}]),t}(i.Component),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(F.a)({},e,t.target.value))}},a.state={layer_name:e.layer.name,is_editing:!1},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"toggleEdit",value:function(e){this.setState({is_editing:e})}},{key:"onSubmit",value:function(){this.setState({layer_name:"",is_editing:!1}),this.props.handleEditLayer(this.props.layer.id,this.state.layer_name)}},{key:"render",value:function(){var e=this;return this.state.is_editing?l.a.createElement("div",{className:"layer-edit-form"},l.a.createElement(O.a,{id:"layer-name",label:"Name",className:"text-field",value:this.state.layer_name,onChange:this.handleChange("layer_name"),margin:"normal",variant:"outlined"}),l.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:this.onSubmit.bind(this)},l.a.createElement("i",{className:"material-icons"},"save")),l.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:function(){e.toggleEdit(!1)}},l.a.createElement("i",{className:"material-icons"},"close"))):l.a.createElement("div",{className:"LayerPlate"},l.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){e.props.handleSwapLayer(e.props.layer.id)}},this.props.layer.name),this.props.layer.deletable&&l.a.createElement("span",{className:"actions"},l.a.createElement(S.a,{color:"secondary","aria-label":"remove layer",onClick:function(){e.props.handleRemoveLayer(e.props.layer.id)}},l.a.createElement("i",{className:"material-icons"},"delete")),l.a.createElement(S.a,{color:"secondary","aria-label":"edit layer",onClick:function(){e.toggleEdit(!0)}},l.a.createElement("i",{className:"material-icons"},"edit"))))}}]),t}(i.Component),W=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"Layers tool-pane"},l.a.createElement("h4",null,"Layers"),this.props.layers.map(function(t,a){return l.a.createElement("div",{key:a,className:a===e.props.current_layer?"layer-selected":""},l.a.createElement(V,{layer:t,handleSwapLayer:e.props.handleSwapLayer,handleRemoveLayer:e.props.handleRemoveLayer,handleEditLayer:e.props.handleEditLayer}))}),l.a.createElement("hr",null),l.a.createElement(B,{handleAddLayer:this.props.handleAddLayer}))}}]),t}(i.Component),$=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"RegionViewer tool-pane"},l.a.createElement("h4",null,"Regions"))}}]),t}(i.Component),q=a(79),H=a.n(q),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleGridChange=function(e){return function(t){var i=parseInt(t.target.value)?parseInt(t.target.value):a.state.grid_min;a.setState(Object(F.a)({},e,i),function(){i<a.state.grid_min?a.setState(Object(F.a)({},e,a.state.grid_min)):i>a.state.grid_max&&a.setState(Object(F.a)({},e,a.state.grid_max))})}},a.state={cols:e.cols,rows:e.rows,grid_min:1,grid_max:50},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.state.cols,a=this.state.rows;if(t!==this.props.cols||a!==this.props.rows){var i=[];new Array(t).fill(this.props.empty_tile).map(function(t,l){return new Array(a).fill(e.props.empty_tile).map(function(t,a){i.push(JSON.parse(JSON.stringify(e.props.empty_tile)))})}),this.props.onUpdateGridSize(t,a,i)}}},{key:"render",value:function(){return l.a.createElement("div",{className:"Settings tool-pane"},l.a.createElement("div",{className:"form row"},l.a.createElement("div",{className:"inline-group"},l.a.createElement(O.a,{id:"cols",label:"cols",className:"text-field grid-field",value:this.state.cols,onChange:this.handleGridChange("cols"),margin:"normal",variant:"outlined",type:"number"}),l.a.createElement(O.a,{id:"rows",label:"Rows",className:"text-field grid-field",value:this.state.rows,onChange:this.handleGridChange("rows"),margin:"normal",variant:"outlined",type:"number"})),this.props.cols!==this.state.cols||this.props.rows!==this.state.rows?l.a.createElement(H.a,{in:this.props.cols!==this.state.cols||this.props.rows!==this.state.rows},l.a.createElement("p",{className:"red-text"},"WARNING This action will clear the current grid of all tiles")):null,l.a.createElement(S.a,{variant:"outlined",color:"primary",className:"btn-full-width",onClick:this.onSubmit.bind(this)},l.a.createElement("i",{className:"material-icons"},"save")),l.a.createElement("br",null)))}}]),t}(i.Component),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.state={value:0},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"ToolPanel"},l.a.createElement(f.a,{className:"tool-tabs",position:"static"},l.a.createElement(A.a,{variant:"fullWidth",value:this.state.value,onChange:this.handleChange},l.a.createElement(R.a,{label:"Palette"}),l.a.createElement(R.a,{label:"Layers"}),l.a.createElement(R.a,{label:"Regions"}),l.a.createElement(R.a,{label:"Settings"}))),l.a.createElement("span",{className:0===this.state.value?"":"hidden"},l.a.createElement(D,{handleSwapSelectedTile:this.props.handleSwapSelectedTile,selected_tile:this.props.selected_tile})),l.a.createElement("span",{className:1===this.state.value?"":"hidden"},l.a.createElement(W,{layers:this.props.layers,current_layer:this.props.current_layer,handleAddLayer:this.props.handleAddLayer,handleSwapLayer:this.props.handleSwapLayer,handleRemoveLayer:this.props.handleRemoveLayer,handleEditLayer:this.props.handleEditLayer})),l.a.createElement("span",{className:2===this.state.value?"":"hidden"},l.a.createElement($,null)),l.a.createElement("span",{className:3===this.state.value?"":"hidden"},l.a.createElement(K,{cols:this.props.cols,rows:this.props.rows,tiles:this.props.tiles,empty_tile:this.props.empty_tile,onUpdateGridSize:this.props.onUpdateGridSize})))}}]),t}(i.Component),X=a(44),Y=a.n(X),Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={can_hotkey:!1},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"Toolbar"},l.a.createElement(Y.a,{title:"pencil"},l.a.createElement(S.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("pencil")},variant:"pencil"===this.props.tool_in_use?"contained":"outlined",color:"secondary"},l.a.createElement("i",{className:"material-icons"},"edit"))),l.a.createElement(Y.a,{title:"eraser"},l.a.createElement(S.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("eraser")},variant:"eraser"===this.props.tool_in_use?"contained":"outlined",color:"secondary"},l.a.createElement("i",{className:"material-icons"},"indeterminate_check_box"))),l.a.createElement(Y.a,{title:"fill"},l.a.createElement(S.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("filler")},variant:"filler"===this.props.tool_in_use?"contained":"outlined",color:"secondary"},l.a.createElement("i",{className:"material-icons"},"format_color_fill"))),l.a.createElement(Y.a,{title:"box paint"},l.a.createElement(S.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("box_paint")},variant:"box_paint"===this.props.tool_in_use?"contained":"outlined",color:"secondary",disabled:!0},l.a.createElement("i",{className:"material-icons"},"select_all"))),l.a.createElement(Y.a,{title:"undo"},l.a.createElement(S.a,{className:"btn-tool",onClick:function(){e.props.onUndo()},variant:"contained",color:"secondary",disabled:this.props.tile_history_index>=this.props.tile_history.length-1},l.a.createElement("i",{className:"material-icons"},"undo"))),l.a.createElement(Y.a,{title:"redo"},l.a.createElement(S.a,{className:"btn-tool",onClick:function(){e.props.onRedo()},variant:"contained",color:"secondary",disabled:this.props.tile_history_index<=0},l.a.createElement("i",{className:"material-icons"},"redo"))))}}]),t}(i.Component),ee=function(e){var t=e.saves,a=e.onDeleteSave,i=e.onLoadSave;return l.a.createElement("div",{className:"SaveList"},l.a.createElement(k.a,{container:!0,spacing:24},t.map(function(e,t){return l.a.createElement(k.a,{key:t,item:!0,xs:12},l.a.createElement(S.a,{color:"primary",variant:"contained","aria-label":"save",onClick:function(){i(e.id)}},"Load ",e.timestamp.toString()),l.a.createElement(S.a,{color:"secondary",variant:"contained","aria-label":"delete save",onClick:function(){a(e.id)}},l.a.createElement("i",{className:"material-icons"},"delete")))})))},te=function(e){function t(){var e;Object(c.a)(this,t),e=Object(d.a)(this,Object(u.a)(t).call(this));var a={type:0,character:"",color:"white",data:null},i=new Array(720).fill(Object(o.a)({},a)),l=JSON.parse(localStorage.getItem("ascii_map_maker"));return e.state={local_storage_key:"ascii_map_maker",show_saves:!1,saves:l,default_cols:36,default_rows:20,tile_size:32,tile_gutter:8,empty_tile:a,tile_history_max:10,selected_tile:{character:"#",color:"#fff",data:null},tool_in_use:"pencil",layers:[{id:1,name:"Base",cols:36,rows:20,tiles:i,tile_history:[JSON.stringify(i)],tile_history_index:0,deletable:!1},{id:2,name:"Base 2",cols:36,rows:20,tiles:i,tile_history:[JSON.stringify(i)],tile_history_index:0,deletable:!0}],current_layer:0},e}return Object(m.a)(t,e),Object(h.a)(t,[{key:"handleToolSwitch",value:function(e){this.setState({tool_in_use:e})}},{key:"handleUndo",value:function(){var e=this.state.layers[this.state.current_layer].tile_history_index+1,t=JSON.parse(this.state.layers[this.state.current_layer].tile_history[e]),a=Object(r.a)(this.state.layers);a[this.state.current_layer].tiles=t,a[this.state.current_layer].tile_history_index=e,this.setState({layers:a})}},{key:"handleRedo",value:function(){var e=this.state.layers[this.state.current_layer].tile_history_index-1,t=JSON.parse(this.state.layers[this.state.current_layer].tile_history[e]),a=Object(r.a)(this.state.layers);a[this.state.current_layer].tiles=t,a[this.state.current_layer].tile_history_index=e,this.setState({layers:a})}},{key:"handleSwapSelectedTile",value:function(e){var t="eraser"===this.state.tool_in_use?"pencil":this.state.tool_in_use;this.setState({selected_tile:e,tool_in_use:t})}},{key:"handleUpdateTiles",value:function(e){var t=[JSON.stringify(e)].concat(Object(r.a)(this.state.layers[this.state.current_layer].tile_history)).slice(this.state.layers[this.state.current_layer].tile_history_index,this.state.tile_history_max),a=Object(r.a)(this.state.layers);a[this.state.current_layer].tile_history_index=0,a[this.state.current_layer].tiles=e,a[this.state.current_layer].tile_history=t,this.setState({layers:a})}},{key:"handleUpdateGridSize",value:function(e,t,a){var i=Object(r.a)(this.state.layers);i[this.state.current_layer].cols=e,i[this.state.current_layer].rows=t,i[this.state.current_layer].tiles=a,this.setState({layers:i})}},{key:"handleAddLayer",value:function(e){var t=this,a=new Array(this.state.default_cols*this.state.default_rows).fill(Object(o.a)({},this.state.empty_tile)),i=Object(r.a)(this.state.layers),l=i.length>0?i[i.length-1].id+1:1;e.id=l,e.tiles=a,e.cols=this.state.default_cols,e.rows=this.state.default_rows,e.tile_history=[JSON.stringify(a)],e.tile_history_index=0,e.deletable=!0,i=i.concat(e),this.setState({layers:i},function(){t.handleSwapLayer(l)})}},{key:"handleSwapLayer",value:function(e){this.setState({current_layer:e-1})}},{key:"handleRemoveLayer",value:function(e){var t=Object(r.a)(this.state.layers).filter(function(t){return t.id!==e});this.setState({layers:t,current_layer:0})}},{key:"handleEditLayer",value:function(e,t){var a=Object(r.a)(this.state.layers).map(function(a){return a.id===e&&(a.name=t),a});this.setState({layers:a})}},{key:"handleToggleSaves",value:function(e){this.setState({show_saves:e})}},{key:"handleSaveStateToLocalStorage",value:function(){var e=JSON.parse(localStorage.getItem(this.state.local_storage_key)),t=1;e&&(t=e.length>0?e[e.length-1].id+1:1);var a={id:t,timestamp:new Date,data:this.state},i=null!==e?[].concat(Object(r.a)(e),[a]):[a];try{localStorage.setItem(this.state.local_storage_key,JSON.stringify(i)),this.setState({saves:i})}catch(l){alert("Local storage is full")}}},{key:"handleLoadStateFromLocalStorage",value:function(e){var t=this.state.saves.filter(function(t){return t.id===e});if(t.length>0){var a=Object(o.a)({},t[0].data,{saves:Object(r.a)(this.state.saves)});this.setState(a)}this.handleToggleSaves(!1)}},{key:"handleDeleteStateFromLocalStorage",value:function(e){var t=JSON.parse(localStorage.getItem(this.state.local_storage_key)).filter(function(t){return t.id!==e});localStorage.setItem(this.state.local_storage_key,JSON.stringify(t)),this.setState({saves:t})}},{key:"render",value:function(){var e=this;return l.a.createElement(p.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(f.a,{className:"NavBar",position:"static"},l.a.createElement(g.a,null,l.a.createElement("h5",{className:"nav-title",onClick:function(){window.location="#/"}},"ASCII Map Maker"),l.a.createElement(Z,{onToolSwitch:this.handleToolSwitch.bind(this),onUndo:this.handleUndo.bind(this),onRedo:this.handleRedo.bind(this),tile_history:this.state.layers[this.state.current_layer].tile_history,tile_history_index:this.state.layers[this.state.current_layer].tile_history_index,selected_tile:this.state.selected_tile,tool_in_use:this.state.tool_in_use}),l.a.createElement("div",{className:"nav-buttons-right"},l.a.createElement(S.a,{variant:"contained",color:"secondary",onClick:this.handleSaveStateToLocalStorage.bind(this)},"Save"),l.a.createElement(S.a,{variant:"contained",color:"secondary",disabled:!this.state.saves.length,onClick:function(){e.handleToggleSaves(!e.state.show_saves)}},"Load"),l.a.createElement(S.a,{color:"inherit",onClick:function(){window.location="#/export"}},"Export")))),this.state.show_saves&&l.a.createElement(ee,{saves:this.state.saves,onLoadSave:this.handleLoadStateFromLocalStorage.bind(this),onDeleteSave:this.handleDeleteStateFromLocalStorage.bind(this)}),l.a.createElement(_.a,{atEnter:{opacity:0},atLeave:{opacity:0},atActive:{opacity:1},className:"fade"},l.a.createElement(y.a,{exact:!0,path:"/",render:function(t){return l.a.createElement(k.a,{container:!0},l.a.createElement(k.a,{item:!0,xs:12,sm:8},l.a.createElement(J,{cols:e.state.layers[e.state.current_layer].cols,rows:e.state.layers[e.state.current_layer].rows,tiles:e.state.layers[e.state.current_layer].tiles,tile_size:32,tile_gutter:8,selected_tile:Object(o.a)({},e.state.selected_tile),onUpdateTiles:e.handleUpdateTiles.bind(e),tool_in_use:e.state.tool_in_use,empty_tile:e.state.empty_tile})),l.a.createElement(k.a,{item:!0,xs:12,sm:4},l.a.createElement(Q,{layers:e.state.layers,current_layer:e.state.current_layer,cols:e.state.layers[e.state.current_layer].cols,rows:e.state.layers[e.state.current_layer].rows,tiles:e.state.layers[e.state.current_layer].tiles,empty_tile:e.state.empty_tile,selected_tile:e.state.selected_tile,handleSwapSelectedTile:e.handleSwapSelectedTile.bind(e),handleAddLayer:e.handleAddLayer.bind(e),handleSwapLayer:e.handleSwapLayer.bind(e),handleRemoveLayer:e.handleRemoveLayer.bind(e),handleEditLayer:e.handleEditLayer.bind(e),onUpdateGridSize:e.handleUpdateGridSize.bind(e)})))}}),l.a.createElement(y.a,{path:"/export",render:function(t){return l.a.createElement(j,{cols:e.state.layers[e.state.current_layer].cols,rows:e.state.layers[e.state.current_layer].rows,tiles:e.state.layers[e.state.current_layer].tiles})}}))))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[201,2,1]]]);
//# sourceMappingURL=main.c0770f07.chunk.js.map