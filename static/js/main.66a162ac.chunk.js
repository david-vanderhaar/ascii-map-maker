(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(308)},123:function(e,t,a){},139:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var l=a(0),i=a.n(l),n=a(22),s=a.n(n),o=(a(123),a(26)),r=a(15),c=a(16),h=a(18),d=a(17),p=a(19),u=a(310),m=a(311),f=a(117),b=(a(139),a(51)),v=a.n(b),_=a(116),w=a.n(_),y=a(21),E=a.n(y),O=a(27),g=a.n(O),S=a(29),N=a.n(S),j=function(e){var t=e.cols,a=e.rows,l=e.tiles;return i.a.createElement("div",{className:"JsonView"},i.a.createElement(N.a,{container:!0,spacing:24},i.a.createElement(N.a,{item:!0,xs:12,sm:4},i.a.createElement(E.a,{color:"primary",variant:"contained","aria-label":"copy",onClick:function(){document.getElementById("json-export-data").select(),document.execCommand("copy")}},"Copy to Clipboard")),i.a.createElement(N.a,{item:!0,xs:12,sm:8},i.a.createElement(g.a,{id:"json-export-data",label:"Json",multiline:!0,fullWidth:!0,rowsMax:"8",value:JSON.stringify({cols:t,rows:a,tiles:l}),margin:"normal",variant:"outlined"}))))},k=a(36),C=a(49),T=a.n(C),x=(l.Component,function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(){a.props.onUpdateTile(a.props.x,a.props.y)},a.handleMouseOver=function(){a.props.mouse_down&&a.props.onUpdateTile(a.props.x,a.props.y),a.setState({is_hovering:!0})},a.handleMouseOut=function(){a.setState({is_hovering:!1})},a.state={character:e.character,fill:e.color,hover_fill:"red",is_hovering:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(k.Text,{text:this.props.character,fill:this.state.is_hovering?this.state.hover_fill:this.props.color,x:this.props.x,y:this.props.y,fontSize:16,align:"center",verticalAlign:"middle",width:this.props.tile_size,height:this.props.tile_size,onClick:this.handleClick,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})}}]),t}(l.Component)),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={mouse_down:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getTile",value:function(e,t){return this.props.tiles[t*this.props.cols+e]}},{key:"drawTiles",value:function(){var e=this;return new Array(this.props.cols).fill(null).map(function(t,a){return new Array(e.props.rows).fill(null).map(function(t,l){var n=e.getTile(a,l);return i.a.createElement(x,{key:"".concat(a,"-").concat(l),x:a*e.props.tile_size,y:l*e.props.tile_size,character:n.character,color:n.color,tile_size:e.props.tile_size,mouse_down:e.state.mouse_down,onUpdateTile:e.handleUpdateTile.bind(e)})})})}},{key:"floodFillUtil",value:function(e,t,a,l,i,n,s){var o=a[i*e+l];return l<0||l>=e||i<0||i>=t?a:JSON.stringify(o)!==JSON.stringify(n)?a:(a[i*e+l]=JSON.parse(JSON.stringify(s)),this.floodFillUtil(e,t,a,l+1,i,n,s),this.floodFillUtil(e,t,a,l-1,i,n,s),this.floodFillUtil(e,t,a,l,i+1,n,s),this.floodFillUtil(e,t,a,l,i-1,n,s),a)}},{key:"floodFill",value:function(e,t,a,l,i,n){var s=a[i*e+l];return this.floodFillUtil(e,t,a,l,i,s,n)}},{key:"handleUpdateTile",value:function(e,t){var a=e/this.props.tile_size,l=t/this.props.tile_size,i=JSON.parse(JSON.stringify(this.props.tiles));switch(this.props.tool_in_use){case"pencil":i[l*this.props.cols+a]={type:1,character:this.props.selected_tile.character,color:this.props.selected_tile.color,data:JSON.stringify(this.props.selected_tile.data)};break;case"eraser":i[l*this.props.cols+a]=Object(o.a)({},this.props.empty_tile);break;case"filler":JSON.stringify(i[l*this.props.cols+a])!==JSON.stringify(this.props.selected_tile)&&(i=this.floodFill(this.props.cols,this.props.rows,i,a,l,this.props.selected_tile));break;default:i[l*this.props.cols+a]={type:1,character:this.props.selected_tile.character,color:this.props.selected_tile.color}}this.props.onUpdateTiles(i)}},{key:"handleMouseDown",value:function(){this.setState({mouse_down:!0})}},{key:"handleMouseUp",value:function(){this.setState({mouse_down:!1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"TileMap"},i.a.createElement(k.Stage,{width:this.props.cols*this.props.tile_size,height:this.props.rows*this.props.tile_size,onMouseDown:this.handleMouseDown.bind(this),onMouseUp:this.handleMouseUp.bind(this)},i.a.createElement(k.Layer,null,this.drawTiles().map(function(e){return e}))))}}]),t}(l.Component),z=a(115),M=a.n(z),J=a(52),A=a.n(J),F=a(118),G=a(35),R=a(114),P=a.n(R),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(G.a)({},e,t.target.value))}},a.state={tile_label:"",tile_character:"",tile_color:"",tile_data:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(){var e={label:this.state.tile_label,character:this.state.tile_character,color:this.state.tile_color,data:Object(o.a)({},this.state.tile_data)};this.props.handleAddTile(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"TileForm"},i.a.createElement("div",{className:"form row"},i.a.createElement(g.a,{id:"tile-label",label:"Label",className:"text-field",defaultValue:this.state.tile_label,onChange:this.handleChange("tile_label"),margin:"normal",variant:"outlined"}),i.a.createElement(g.a,{id:"tile-character",label:"Character",className:"text-field",defaultValue:this.state.tile_character,onChange:this.handleChange("tile_character"),margin:"normal",variant:"outlined"}),i.a.createElement(g.a,{id:"tile-color",label:"Hex Color",className:"text-field",defaultValue:this.state.tile_color,onChange:this.handleChange("tile_color"),margin:"normal",variant:"outlined",InputProps:{startAdornment:i.a.createElement(P.a,{position:"start"},"#")}}),i.a.createElement(g.a,{id:"tile-data",label:"Data",placeholder:"{ type: tree }",multiline:!0,defaultValue:this.state.tile_data,onChange:this.handleChange("tile_data"),className:"text-field",margin:"normal",variant:"outlined"}),i.a.createElement(E.a,{variant:"outlined",color:"primary",className:"btn-full-width",onClick:this.onSubmit.bind(this)},i.a.createElement("i",{className:"material-icons"},"save"))))}}]),t}(l.Component),V=function(e){var t=e.id,a=e.label,l=e.color,n=e.character,s=e.data,o=e.handleSwapSelectedTile,r=e.handleRemoveTile;return i.a.createElement("div",{className:"TilePlate"},i.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){o({character:n,color:l,data:s})}},a),i.a.createElement(E.a,{color:"secondary","aria-label":"remove tile",onClick:function(){r(t)}},i.a.createElement("i",{className:"material-icons"},"delete")))},W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={tiles:[{id:1,label:"land",color:"#298",character:"L",data:{type:"province",owner:"Oda"}},{id:2,label:"water",color:"#ace",character:"~",data:{type:"natural",owner:"none"}},{id:3,label:"mountain",color:"#bbb",character:"M",data:{type:"natural",owner:"none"}},{id:4,label:"army",color:"#f44",character:"@",data:{type:"troop",owner:"Oda"}}],form_is_visible:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawTilePlates",value:function(){var e=this;return this.state.tiles.map(function(t,a){return i.a.createElement(V,{key:a,id:t.id,label:t.label,color:t.color,character:t.character,data:Object(o.a)({},t.data),handleSwapSelectedTile:e.props.handleSwapSelectedTile,handleRemoveTile:e.handleRemoveTile.bind(e)})})}},{key:"handleToggleForm",value:function(){this.setState({form_is_visible:!this.state.form_is_visible})}},{key:"handleAddTile",value:function(e){var t=Object(F.a)(this.state.tiles),a={id:t.length>0?t[t.length-1].id+1:1};this.setState({tiles:t.concat(Object(o.a)({},a,e)),form_is_visible:!1})}},{key:"handleRemoveTile",value:function(e){var t=this.state.tiles.filter(function(t){return t.id!==e});this.setState({tiles:t})}},{key:"render",value:function(){return i.a.createElement("div",{className:"TilePalette tool-pane"},i.a.createElement("h4",null,"Palette"),this.drawTilePlates(),i.a.createElement("br",null),i.a.createElement(E.a,{variant:"outlined",color:"default",className:"btn-full-width",onClick:this.handleToggleForm.bind(this)},this.state.form_is_visible?i.a.createElement("i",{className:"material-icons"},"close"):i.a.createElement("i",{className:"material-icons"},"add")),this.state.form_is_visible&&i.a.createElement(I,{handleAddTile:this.handleAddTile.bind(this)}))}}]),t}(l.Component),B=function(e){function t(){return Object(r.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"RegionViewer tool-pane"},i.a.createElement("h4",null,"Regions"))}}]),t}(l.Component),D=a(74),L=a.n(D),H=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleGridChange=function(e){return function(t){var l=parseInt(t.target.value);l>=0&&l<=50&&a.setState(Object(G.a)({},e,l))}},a.state={cols:e.cols,rows:e.rows},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.state.cols,a=this.state.rows;if(t!==this.props.cols||a!==this.props.rows){var l=[];new Array(t).fill(this.props.empty_tile).map(function(t,i){return new Array(a).fill(e.props.empty_tile).map(function(t,a){l.push(JSON.parse(JSON.stringify(e.props.empty_tile)))})}),this.props.onUpdateGridSize(t,a,l)}}},{key:"render",value:function(){return i.a.createElement("div",{className:"Settings"},i.a.createElement("div",{className:"form row"},i.a.createElement("div",{className:"inline-group"},i.a.createElement(g.a,{id:"cols",label:"cols",className:"text-field grid-field",value:this.state.cols,onChange:this.handleGridChange("cols"),margin:"normal",variant:"outlined",type:"number"}),i.a.createElement(g.a,{id:"rows",label:"Rows",className:"text-field grid-field",value:this.state.rows,onChange:this.handleGridChange("rows"),margin:"normal",variant:"outlined",type:"number"})),this.props.cols!==this.state.cols||this.props.rows!==this.state.rows?i.a.createElement(L.a,{in:this.props.cols!==this.state.cols||this.props.rows!==this.state.rows},i.a.createElement("p",{className:"red-text"},"WARNING This action will clear the current grid of all tiles")):null,i.a.createElement(E.a,{variant:"outlined",color:"primary",className:"btn-full-width",onClick:this.onSubmit.bind(this)},i.a.createElement("i",{className:"material-icons"},"save")),i.a.createElement("br",null)))}}]),t}(l.Component),$=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.state={value:0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ToolPanel"},i.a.createElement(v.a,{className:"tool-tabs",position:"static"},i.a.createElement(M.a,{variant:"fullWidth",value:this.state.value,onChange:this.handleChange},i.a.createElement(A.a,{label:"Palette"}),i.a.createElement(A.a,{label:"Regions"}),i.a.createElement(A.a,{label:"Settings"}))),i.a.createElement("span",{className:0===this.state.value?"":"hidden"},i.a.createElement(W,{handleSwapSelectedTile:this.props.handleSwapSelectedTile})),i.a.createElement("span",{className:1===this.state.value?"":"hidden"},i.a.createElement(B,null)),i.a.createElement("span",{className:2===this.state.value?"":"hidden"},i.a.createElement(H,{cols:this.props.cols,rows:this.props.rows,tiles:this.props.tiles,empty_tile:this.props.empty_tile,onUpdateGridSize:this.props.onUpdateGridSize})))}}]),t}(l.Component),q=function(e){function t(){return Object(r.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Toolbar"},i.a.createElement(E.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("pencil")},variant:"pencil"===this.props.tool_in_use?"contained":"outlined",color:"secondary"},i.a.createElement("i",{className:"material-icons"},"edit")),i.a.createElement(E.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("eraser")},variant:"eraser"===this.props.tool_in_use?"contained":"outlined",color:"secondary"},i.a.createElement("i",{className:"material-icons"},"indeterminate_check_box")),i.a.createElement(E.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("filler")},variant:"filler"===this.props.tool_in_use?"contained":"outlined",color:"secondary"},i.a.createElement("i",{className:"material-icons"},"format_color_fill")),i.a.createElement(E.a,{className:"btn-tool",onClick:function(){e.props.onToolSwitch("box_paint")},variant:"box_paint"===this.props.tool_in_use?"contained":"outlined",color:"secondary",disabled:!0},i.a.createElement("i",{className:"material-icons"},"select_all")))}}]),t}(l.Component),K=function(e){function t(){var e;Object(r.a)(this,t);var a={type:0,character:"",color:"white",data:null};return(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={cols:36,rows:20,tile_size:32,tile_gutter:8,empty_tile:a,tiles:new Array(720).fill(Object(o.a)({},a)),selected_tile:{character:"#",color:"#fff",data:null},tool_in_use:"pencil"},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleToolSwitch",value:function(e){this.setState({tool_in_use:e})}},{key:"handleSwapSelectedTile",value:function(e){var t="eraser"===this.state.tool_in_use?"pencil":this.state.tool_in_use;this.setState({selected_tile:e,tool_in_use:t})}},{key:"handleUpdateTiles",value:function(e){this.setState({tiles:e})}},{key:"handleUpdateGridSize",value:function(e,t,a){this.setState({cols:e,rows:t,tiles:a})}},{key:"render",value:function(){var e=this;return i.a.createElement(u.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(v.a,{className:"NavBar",position:"static"},i.a.createElement(w.a,null,i.a.createElement("h5",{className:"nav-title",onClick:function(){window.location="#/"}},"ASCII Map Maker"),i.a.createElement(q,{onToolSwitch:this.handleToolSwitch.bind(this),selected_tile:this.state.selected_tile,tool_in_use:this.state.tool_in_use}),i.a.createElement("div",{className:"nav-buttons-right"},i.a.createElement(E.a,{color:"inherit",onClick:function(){window.location="#/export"}},"Export")))),i.a.createElement(f.a,{atEnter:{opacity:0},atLeave:{opacity:0},atActive:{opacity:1},className:"fade"},i.a.createElement(m.a,{exact:!0,path:"/",render:function(t){return i.a.createElement(N.a,{container:!0},i.a.createElement(N.a,{item:!0,xs:12,sm:8},i.a.createElement(U,{cols:e.state.cols,rows:e.state.rows,tiles:e.state.tiles,tile_size:32,tile_gutter:8,selected_tile:Object(o.a)({},e.state.selected_tile),onUpdateTiles:e.handleUpdateTiles.bind(e),tool_in_use:e.state.tool_in_use,empty_tile:e.state.empty_tile})),i.a.createElement(N.a,{item:!0,xs:12,sm:4},i.a.createElement($,{cols:e.state.cols,rows:e.state.rows,tiles:e.state.tiles,empty_tile:e.state.empty_tile,handleSwapSelectedTile:e.handleSwapSelectedTile.bind(e),onUpdateGridSize:e.handleUpdateGridSize.bind(e)})))}}),i.a.createElement(m.a,{path:"/export",render:function(t){return i.a.createElement(j,{cols:e.state.cols,rows:e.state.rows,tiles:e.state.tiles})}}))))}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,2,1]]]);
//# sourceMappingURL=main.66a162ac.chunk.js.map